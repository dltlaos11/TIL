# ìƒíƒœ íŒ¨í„´(State Pattern) TIL

## ğŸ“Œ ìƒíƒœ íŒ¨í„´ì´ë€?

ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœê°€ ë³€ê²½ë  ë•Œ ê°ì²´ì˜ í–‰ë™ì„ ë³€ê²½í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í–‰ë™ íŒ¨í„´ì…ë‹ˆë‹¤.
ê°ì²´ê°€ ë§ˆì¹˜ í´ë˜ìŠ¤ë¥¼ ë°”ê¾¼ ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

## ğŸ¯ í•µì‹¬ ê°œë…

**ìƒíƒœë³„ í–‰ë™ì„ ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬**í•˜ì—¬ ë³µì¡í•œ ì¡°ê±´ë¬¸ì„ ì œê±°í•˜ê³  í™•ì¥ì„±ì„ ë†’ì…ë‹ˆë‹¤.

## ğŸ—ï¸ ê¸°ë³¸ êµ¬ì¡°

```java
// State ì¸í„°í˜ì´ìŠ¤
interface State {
    void handle(Context context);
}

// êµ¬ì²´ì ì¸ ìƒíƒœë“¤
class ConcreteStateA implements State {
    public void handle(Context context) {
        // ìƒíƒœ Aì—ì„œì˜ í–‰ë™
        context.setState(new ConcreteStateB());
    }
}

class ConcreteStateB implements State {
    public void handle(Context context) {
        // ìƒíƒœ Bì—ì„œì˜ í–‰ë™
        context.setState(new ConcreteStateA());
    }
}

// Context í´ë˜ìŠ¤
class Context {
    private State state;

    public Context() {
        state = new ConcreteStateA(); // ì´ˆê¸° ìƒíƒœ
    }

    public void setState(State state) {
        this.state = state;
    }

    public void request() {
        state.handle(this);
    }
}
```

## ğŸ° ì‹¤ì œ ì˜ˆì‹œ: ë½‘ê¸° ë¨¸ì‹ 

### ê¸°ë³¸ êµ¬í˜„

```java
// ìƒíƒœ ì¸í„°í˜ì´ìŠ¤
interface State {
    void insertQuarter();
    void ejectQuarter();
    void turnCrank();
    void dispense();
}

// ë™ì „ ì—†ìŒ ìƒíƒœ
class NoQuarterState implements State {
    GumballMachine gumballMachine;

    public NoQuarterState(GumballMachine gumballMachine) {
        this.gumballMachine = gumballMachine;
    }

    public void insertQuarter() {
        System.out.println("ë™ì „ì„ ë„£ì—ˆìŠµë‹ˆë‹¤");
        gumballMachine.setState(gumballMachine.getHasQuarterState());
    }

    public void ejectQuarter() {
        System.out.println("ë™ì „ì„ ë„£ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤");
    }

    public void turnCrank() {
        System.out.println("ë¨¼ì € ë™ì „ì„ ë„£ì–´ì£¼ì„¸ìš”");
    }

    public void dispense() {
        System.out.println("ë¨¼ì € ë™ì „ì„ ë„£ì–´ì£¼ì„¸ìš”");
    }
}

// ë™ì „ ìˆìŒ ìƒíƒœ
class HasQuarterState implements State {
    GumballMachine gumballMachine;

    public HasQuarterState(GumballMachine gumballMachine) {
        this.gumballMachine = gumballMachine;
    }

    public void insertQuarter() {
        System.out.println("ì´ë¯¸ ë™ì „ì´ ìˆìŠµë‹ˆë‹¤");
    }

    public void ejectQuarter() {
        System.out.println("ë™ì „ì´ ë°˜í™˜ë©ë‹ˆë‹¤");
        gumballMachine.setState(gumballMachine.getNoQuarterState());
    }

    public void turnCrank() {
        System.out.println("ì†ì¡ì´ë¥¼ ëŒë ¸ìŠµë‹ˆë‹¤...");
        gumballMachine.setState(gumballMachine.getSoldState());
    }

    public void dispense() {
        System.out.println("ë¨¼ì € ì†ì¡ì´ë¥¼ ëŒë ¤ì£¼ì„¸ìš”");
    }
}

// íŒë§¤ ìƒíƒœ
class SoldState implements State {
    GumballMachine gumballMachine;

    public SoldState(GumballMachine gumballMachine) {
        this.gumballMachine = gumballMachine;
    }

    public void insertQuarter() {
        System.out.println("ì ê¹ë§Œìš”, ê»Œë³¼ì„ ë‚´ë³´ë‚´ëŠ” ì¤‘ì…ë‹ˆë‹¤");
    }

    public void ejectQuarter() {
        System.out.println("ì´ë¯¸ ì†ì¡ì´ë¥¼ ëŒë ¸ìŠµë‹ˆë‹¤");
    }

    public void turnCrank() {
        System.out.println("ë‘ ë²ˆ ëŒë¦´ í•„ìš” ì—†ìŠµë‹ˆë‹¤!");
    }

    public void dispense() {
        gumballMachine.releaseBall();
        if (gumballMachine.getCount() > 0) {
            gumballMachine.setState(gumballMachine.getNoQuarterState());
        } else {
            System.out.println("í’ˆì ˆ!");
            gumballMachine.setState(gumballMachine.getSoldOutState());
        }
    }
}

// ë½‘ê¸° ë¨¸ì‹  ì»¨í…ìŠ¤íŠ¸
class GumballMachine {
    State noQuarterState;
    State hasQuarterState;
    State soldState;
    State soldOutState;

    State state;
    int count = 0;

    public GumballMachine(int numberGumballs) {
        noQuarterState = new NoQuarterState(this);
        hasQuarterState = new HasQuarterState(this);
        soldState = new SoldState(this);
        soldOutState = new SoldOutState(this);

        this.count = numberGumballs;
        if (numberGumballs > 0) {
            state = noQuarterState;
        } else {
            state = soldOutState;
        }
    }

    public void insertQuarter() {
        state.insertQuarter();
    }

    public void ejectQuarter() {
        state.ejectQuarter();
    }

    public void turnCrank() {
        state.turnCrank();
        state.dispense();
    }

    public void setState(State state) {
        this.state = state;
    }

    public State getNoQuarterState() { return noQuarterState; }
    public State getHasQuarterState() { return hasQuarterState; }
    public State getSoldState() { return soldState; }
    public State getSoldOutState() { return soldOutState; }

    public int getCount() { return count; }
    public void releaseBall() {
        if (count > 0) count--;
    }
}
```

## ğŸ†š ì „ëµ íŒ¨í„´ê³¼ì˜ ì°¨ì´ì 

| êµ¬ë¶„          | ì „ëµ íŒ¨í„´              | ìƒíƒœ íŒ¨í„´               |
| ------------- | ---------------------- | ----------------------- |
| **ëª©ì **      | ì•Œê³ ë¦¬ì¦˜ êµì²´          | ìƒíƒœë³„ í–‰ë™ ë³€ê²½        |
| **ì „í™˜ ì£¼ì²´** | í´ë¼ì´ì–¸íŠ¸ê°€ ì „ëµ ì„ íƒ | ìƒíƒœê°€ ìŠ¤ìŠ¤ë¡œ ì „í™˜      |
| **ì˜ì¡´ì„±**    | ì „ëµë“¤ì€ ì„œë¡œ ë…ë¦½ì    | ìƒíƒœë“¤ì€ ì„œë¡œ ì•Œê³  ìˆìŒ |

```java
// ì „ëµ íŒ¨í„´ - í´ë¼ì´ì–¸íŠ¸ê°€ ì „ëµì„ ì„ íƒ
Duck duck = new Duck();
duck.setFlyBehavior(new FlyWithWings());  // í´ë¼ì´ì–¸íŠ¸ê°€ ì„ íƒ
duck.performFly();

// ìƒíƒœ íŒ¨í„´ - ìƒíƒœê°€ ìŠ¤ìŠ¤ë¡œ ì „í™˜
GumballMachine machine = new GumballMachine(10);
machine.insertQuarter();  // NoQuarter â†’ HasQuarter (ìë™ ì „í™˜)
machine.turnCrank();      // HasQuarter â†’ Sold (ìë™ ì „í™˜)
```

## ğŸ”§ Interface vs Abstract Class

### Interface ì‚¬ìš© (ìˆœìˆ˜í•œ ê³„ì•½)

```java
interface State {
    void insertQuarter();
    void ejectQuarter();
    void turnCrank();
    void dispense();

    // Java 8+ ê¸°ë³¸ ë©”ì„œë“œë¡œ ê³µí†µ í–‰ë™ ì œê³µ ê°€ëŠ¥
    default void invalidAction(String action) {
        System.out.println(action + "ì€(ëŠ”) í˜„ì¬ ìƒíƒœì—ì„œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤");
    }
}
```

### Abstract Class ì‚¬ìš© (ê³µí†µ ë¡œì§ å¤š)

```java
abstract class State {
    protected GumballMachine gumballMachine;
    protected Random random = new Random();

    public State(GumballMachine machine) {
        this.gumballMachine = machine;
    }

    // ê³µí†µ ë¡œì§ ì œê³µ
    protected void logStateChange(String from, String to) {
        System.out.println("ìƒíƒœ ë³€ê²½: " + from + " -> " + to);
    }

    // ê¸°ë³¸ êµ¬í˜„ (ëŒ€ë¶€ë¶„ì˜ ìƒíƒœì—ì„œ ë™ì¼í•œ ë™ì‘)
    public void insertQuarter() {
        System.out.println("í˜„ì¬ ìƒíƒœì—ì„œëŠ” ë™ì „ì„ ë„£ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
    }

    // ì¶”ìƒ ë©”ì„œë“œ (ê° ìƒíƒœë§ˆë‹¤ ë‹¤ë¥¸ êµ¬í˜„ í•„ìš”)
    public abstract void handle();
}
```

**ì›ì¹™**: ê³µí†µ ë¡œì§ì´ ë§ìœ¼ë©´ ì¶”ìƒ í´ë˜ìŠ¤, ìˆœìˆ˜í•œ ê³„ì•½ë§Œ ì •ì˜í•˜ë©´ ì¸í„°í˜ì´ìŠ¤!

## âš¡ ìƒíƒœ ì „í™˜ ê´€ë¦¬ì˜ ë¬¸ì œì ê³¼ í•´ê²°ì±…

### 1. ìƒíƒœ í´ë˜ìŠ¤ì— ì „í™˜ ì •ë³´ê°€ ìˆì„ ë•Œì˜ ë¬¸ì œì 

**ê°•í•œ ê²°í•© (Tight Coupling)**

```java
class NoQuarterState implements State {
    public void insertQuarter() {
        // ë‹¤ë¥¸ ìƒíƒœë¥¼ ì§ì ‘ ì•Œì•„ì•¼ í•¨!
        gumballMachine.setState(gumballMachine.getHasQuarterState());
    }
}
```

**ìƒíƒœ ì „í™˜ ë¡œì§ì´ ë¶„ì‚°ë˜ì–´ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€**

### 2. Contextë¡œ ì „í™˜ ë¡œì§ì„ ì˜®ê²¼ì„ ë•Œ

**ì¥ì **: ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬, ì „í™˜ ê·œì¹™ íŒŒì•… ìš©ì´
**ë‹¨ì **: Context í´ë˜ìŠ¤ ë¹„ëŒ€í™”, ì¡°ê±´ë¬¸ ë³µê·€

**í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•** (ê¶Œì¥)

```java
// ìƒíƒœëŠ” í–‰ë™ë§Œ ë‹´ë‹¹
class NoQuarterState implements State {
    public StateTransition insertQuarter() {
        System.out.println("ë™ì „ì„ ë„£ì—ˆìŠµë‹ˆë‹¤");
        return StateTransition.to(StateType.HAS_QUARTER);
    }
}

// ContextëŠ” ì „í™˜ ê·œì¹™ë§Œ ê´€ë¦¬
class GumballMachine {
    public void insertQuarter() {
        StateTransition transition = state.insertQuarter();
        if (transition.shouldTransition()) {
            setState(getState(transition.getNextState()));
        }
    }
}
```

## ğŸš€ ë©”ëª¨ë¦¬ ìµœì í™”: ìƒíƒœ ì¸ìŠ¤í„´ìŠ¤ ê³µìœ 

### ë¬¸ì œì 

```java
// 100ê°œì˜ ë¨¸ì‹  = 400ê°œì˜ ìƒíƒœ ê°ì²´!
GumballMachine[] machines = new GumballMachine[100];
for (int i = 0; i < 100; i++) {
    machines[i] = new GumballMachine(50);  // ê°ê° 4ê°œì”© ìƒíƒœ ê°ì²´ ìƒì„±
}
```

### í•´ê²°ì±…: Flyweight íŒ¨í„´ ì ìš©

#### StateManagerë¡œ ì •ì  ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬

```java
class StateManager {
    // ì •ì  ì¸ìŠ¤í„´ìŠ¤ - ëª¨ë“  ë¨¸ì‹ ì´ ê³µìœ 
    private static final State NO_QUARTER_STATE = new NoQuarterState();
    private static final State HAS_QUARTER_STATE = new HasQuarterState();
    private static final State SOLD_STATE = new SoldState();
    private static final State SOLD_OUT_STATE = new SoldOutState();

    public static State getNoQuarterState() { return NO_QUARTER_STATE; }
    public static State getHasQuarterState() { return HAS_QUARTER_STATE; }
    public static State getSoldState() { return SOLD_STATE; }
    public static State getSoldOutState() { return SOLD_OUT_STATE; }
}
```

#### ìƒíƒœ í´ë˜ìŠ¤ ìˆ˜ì • (íŒŒë¼ë¯¸í„°ë¡œ ë¨¸ì‹  ì „ë‹¬)

```java
// ìˆ˜ì •ëœ State ì¸í„°í˜ì´ìŠ¤
interface State {
    void insertQuarter(GumballMachine machine);
    void ejectQuarter(GumballMachine machine);
    void turnCrank(GumballMachine machine);
    void dispense(GumballMachine machine);
}

// ìˆ˜ì •ëœ ìƒíƒœ í´ë˜ìŠ¤ - ë” ì´ìƒ íŠ¹ì • ë¨¸ì‹  ì°¸ì¡° ì•ˆí•¨
class NoQuarterState implements State {
    public void insertQuarter(GumballMachine machine) {
        System.out.println("ë™ì „ì„ ë„£ì—ˆìŠµë‹ˆë‹¤");
        machine.setState(StateManager.getHasQuarterState());
    }

    public void ejectQuarter(GumballMachine machine) {
        System.out.println("ë™ì „ì„ ë„£ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤");
    }

    public void turnCrank(GumballMachine machine) {
        System.out.println("ë¨¼ì € ë™ì „ì„ ë„£ì–´ì£¼ì„¸ìš”");
    }

    public void dispense(GumballMachine machine) {
        System.out.println("ë¨¼ì € ë™ì „ì„ ë„£ì–´ì£¼ì„¸ìš”");
    }
}

class HasQuarterState implements State {
    public void insertQuarter(GumballMachine machine) {
        System.out.println("ì´ë¯¸ ë™ì „ì´ ìˆìŠµë‹ˆë‹¤");
    }

    public void ejectQuarter(GumballMachine machine) {
        System.out.println("ë™ì „ì´ ë°˜í™˜ë©ë‹ˆë‹¤");
        machine.setState(StateManager.getNoQuarterState());
    }

    public void turnCrank(GumballMachine machine) {
        System.out.println("ì†ì¡ì´ë¥¼ ëŒë ¸ìŠµë‹ˆë‹¤");
        machine.setState(StateManager.getSoldState());
    }

    public void dispense(GumballMachine machine) {
        System.out.println("ë¨¼ì € ì†ì¡ì´ë¥¼ ëŒë ¤ì£¼ì„¸ìš”");
    }
}
```

#### ìµœì í™”ëœ GumballMachine

```java
class GumballMachine {
    State state;
    int count;

    public GumballMachine(int numberGumballs) {
        this.count = numberGumballs;
        if (numberGumballs > 0) {
            state = StateManager.getNoQuarterState();  // ê³µìœ  ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©
        } else {
            state = StateManager.getSoldOutState();
        }
    }

    public void insertQuarter() {
        state.insertQuarter(this);  // ìì‹ ì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬
    }

    public void ejectQuarter() {
        state.ejectQuarter(this);
    }

    public void turnCrank() {
        state.turnCrank(this);
        state.dispense(this);
    }

    public void setState(State state) {
        this.state = state;
    }

    public int getCount() { return count; }
    public void releaseBall() {
        if (count > 0) count--;
    }
}
```

## âœ… ì¥ì 

1. **ì¡°ê±´ë¬¸ ì œê±°**: ë³µì¡í•œ if-else ë¬¸ì´ë‚˜ switch ë¬¸ì„ ì œê±°
2. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ìƒíƒœë¥¼ ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥
3. **ë‹¨ì¼ ì±…ì„ ì›ì¹™**: ê° ìƒíƒœë³„ í–‰ë™ì´ ë¶„ë¦¬
4. **ê°œë°©-íì‡„ ì›ì¹™**: ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ì´ ìƒˆ ìƒíƒœ ì¶”ê°€ ê°€ëŠ¥
5. **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: ìƒíƒœ ì¸ìŠ¤í„´ìŠ¤ ê³µìœ ë¡œ ë©”ëª¨ë¦¬ ì ˆì•½

## ğŸ¯ ì‚¬ìš© ì‹œê¸°

- ê°ì²´ì˜ í–‰ë™ì´ ìƒíƒœì— ë”°ë¼ ë‹¬ë¼ì§ˆ ë•Œ
- ìƒíƒœ ì „í™˜ ë¡œì§ì´ ë³µì¡í•  ë•Œ
- ìƒíƒœë³„ ì¡°ê±´ë¬¸ì´ ë„ˆë¬´ ë§ì•„ì§ˆ ë•Œ
- ê²Œì„ ê°œë°œ, UI ì»´í¬ë„ŒíŠ¸, ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ ë“±

## ğŸ”„ Reduxì™€ì˜ ìœ ì‚¬ì 

ìƒíƒœ íŒ¨í„´ê³¼ ReduxëŠ” í¥ë¯¸ë¡œìš´ ìœ ì‚¬ì ë“¤ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:

### ìœ ì‚¬ì 

```javascript
// Redux Reducer - ìƒíƒœë³„ ë¡œì§ ë¶„ë¦¬
const counterReducer = (state = { count: 0 }, action) => {
  switch (action.type) {
    case "INCREMENT":
      return { count: state.count + 1 };
    case "DECREMENT":
      return { count: state.count - 1 };
    default:
      return state;
  }
};

// GoF ìƒíƒœ íŒ¨í„´ - ìƒíƒœë³„ ë¡œì§ ë¶„ë¦¬
class NoQuarterState {
  insertQuarter(machine) {
    machine.setState(StateManager.getHasQuarterState());
  }
}
```

### ì°¨ì´ì 

- **Redux**: ë°ì´í„° ìƒíƒœ ê´€ë¦¬, Actionì„ í†µí•œ ì¤‘ì•™ ì§‘ì¤‘ì‹
- **GoF ìƒíƒœ íŒ¨í„´**: í–‰ë™ ìƒíƒœ ê´€ë¦¬, ìƒíƒœê°€ ì§ì ‘ ì „í™˜í•˜ê±°ë‚˜ Contextê°€ ê´€ë¦¬

### Reduxì—ì„œ ìƒíƒœ íŒ¨í„´ í™œìš©

```javascript
const userStates = {
  LOGGED_OUT: {
    login: (state, action) => ({
      ...state,
      user: action.payload,
      status: "LOGGED_IN",
    }),
    post: (state, action) => ({
      ...state,
      error: "Login required to post",
    }),
  },

  LOGGED_IN: {
    logout: (state, action) => ({
      ...state,
      user: null,
      status: "LOGGED_OUT",
    }),
    post: (state, action) => ({
      ...state,
      posts: [...state.posts, action.payload],
    }),
  },
};

const userReducer = (state = initialState, action) => {
  const currentStateHandlers = userStates[state.status];
  const handler = currentStateHandlers[action.type];

  return handler ? handler(state, action) : state;
};
```

## ğŸ¯ GOFì˜ ìƒíƒœ ì „í™˜ ê¶Œì¥ì‚¬í•­

### 1. Stateì—ì„œ ì „í™˜ (GOF ê¸°ë³¸ ê¶Œì¥)

```java
class ConcreteStateA extends State {
    public void handle(Context context) {
        doSomething();
        // ìƒíƒœê°€ ì§ì ‘ ì „í™˜ ê²°ì •
        context.setState(new ConcreteStateB());
    }
}
```

**ì¥ì **: ìº¡ìŠí™”, ì‘ì§‘ë ¥, ë¶„ì‚°ëœ ì œì–´

### 2. Contextì—ì„œ ì „í™˜

```java
class Context {
    public void request() {
        state.handle(this);
        // Contextê°€ ìƒíƒœ ì „í™˜ ë¡œì§ ê´€ë¦¬
        if (someCondition()) {
            setState(new ConcreteStateB());
        }
    }
}
```

**ì¥ì **: ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬, ë³µì¡í•œ ì „í™˜ ë¡œì§ ì²˜ë¦¬

### ìƒí™©ë³„ ê¶Œì¥ì‚¬í•­

**Stateì—ì„œ ì „í™˜ì´ ì¢‹ì€ ê²½ìš°:**

- ìƒíƒœ ì „í™˜ì´ ë‹¨ìˆœí•˜ê³  ëª…í™•í•  ë•Œ
- ìƒíƒœë³„ë¡œ ì „í™˜ ë¡œì§ì´ ë‹¤ë¥¼ ë•Œ

```java
class NoQuarterState {
    public void insertQuarter(GumballMachine machine) {
        System.out.println("ë™ì „ì„ ë„£ì—ˆìŠµë‹ˆë‹¤");
        // ëª…í™•í•œ ë‹¤ìŒ ìƒíƒœ
        machine.setState(StateManager.getHasQuarterState());
    }
}
```

**Contextì—ì„œ ì „í™˜ì´ ì¢‹ì€ ê²½ìš°:**

- ìƒíƒœ ì „í™˜ì´ ë³µì¡í•˜ê³  ì—¬ëŸ¬ ì¡°ê±´ì„ ê³ ë ¤í•  ë•Œ
- ìƒíƒœ ì „í™˜ ê·œì¹™ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ

```java
class GumballMachine {
    public void insertQuarter() {
        String result = state.insertQuarter(this);

        // ë³µì¡í•œ ì „í™˜ ë¡œì§ì„ Contextê°€ ê´€ë¦¬
        switch (result) {
            case "ACCEPTED":
                if (isSpecialPromotion()) {
                    setState(getWinnerState());
                } else {
                    setState(getHasQuarterState());
                }
                break;
            case "REJECTED":
                setState(getNoQuarterState());
                break;
        }
    }
}
```

### í˜„ëŒ€ì  ê¶Œì¥ì‚¬í•­: í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼

```java
// ìƒíƒœëŠ” "ì „í™˜ ì˜ë„"ë§Œ ë°˜í™˜
class NoQuarterState {
    public StateTransition insertQuarter(GumballMachine machine) {
        System.out.println("ë™ì „ì„ ë„£ì—ˆìŠµë‹ˆë‹¤");
        return StateTransition.to("HAS_QUARTER");
    }
}

// Contextê°€ ì „í™˜ ê·œì¹™ê³¼ ì •ì±… ê´€ë¦¬
class GumballMachine {
    public void insertQuarter() {
        StateTransition transition = state.insertQuarter(this);

        if (transition.isValid()) {
            logStateChange(state.getName(), transition.getNextState());
            setState(createState(transition.getNextState()));
        }
    }
}
```

## ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸

- **ìƒíƒœë³„ í–‰ë™ì„ ë¶„ë¦¬**í•˜ëŠ” ê²ƒì´ í•µì‹¬
- **ì „í™˜ ì£¼ì²´**ì— ë”°ë¼ ì „ëµ íŒ¨í„´ê³¼ êµ¬ë¶„
- **ê³µí†µ ë¡œì§ì˜ ì–‘**ì— ë”°ë¼ Interface vs Abstract Class ì„ íƒ
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**ì„ ìœ„í•´ ìƒíƒœ ì¸ìŠ¤í„´ìŠ¤ ê³µìœ  ê³ ë ¤
- **í–‰ë™ê³¼ ì „í™˜ ë¡œì§ ë¶„ë¦¬**ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- **Reduxì™€ ìœ ì‚¬í•œ íŒ¨í„´**ìœ¼ë¡œ ë°ì´í„° ìƒíƒœ ê´€ë¦¬ì—ë„ ì‘ìš© ê°€ëŠ¥
- **ìƒíƒœ ì „í™˜ì€ ë³µì¡ë„ì— ë”°ë¼ ì„ íƒ**: ë‹¨ìˆœí•¨ ìš°ì„  â†’ Stateì—ì„œ, ë³µì¡í•œ ê·œì¹™ â†’ Contextì—ì„œ, ìµœê³  ìœ ì—°ì„± â†’ í•˜ì´ë¸Œë¦¬ë“œ
