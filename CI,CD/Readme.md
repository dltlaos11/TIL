### 지속적 통합 (CI)

공유 레포지토리에 병합함으로써, 코드의 통합을 자동화하는 과정

모든 변경사항은 `자동 빌드 및 테스트`를 거쳐 메인 브랜치에 통합된다.

- 자동이란 키워드가 중요한 것, 테스트도 함께 자동으로

### 지속적 전달 (CD - Continuous Delivery)

AUTOMATICALLY RELEASE TO REPOSITORY

CI 과정을 한 단계 더 발전시켜, 코드 변경사항이 자동으로 빌드 및 테스트를 거쳐 실제 운영 환경에 배포될 준비가 된것.

이 단계에서는 배포 과정을 완전히 자동화하지 않고, 실제 배포는 수동으로 트리거할 수 있는 옵션을 둔다.

- 배포 준비만 하는 단계. 수동으로 트리거 할 수 있다는 것이 포인트같다.

### 지속적 배포 (CD - Continuous Deployment)

AUTOMATICALLY DEPLOY TO PRODUCTION

모든 코드 변경사항이 자동 테스트를 통과하면 즉시 프로덕션 환경에 배포된다.

지속적 배포를 통해, 소프트웨어의 릴리스 과정이 자동화되어, 인간의 개입 없이도 신속하게 배포된다.

- 릴리스 환경에서 필요한 개발 환경설정들이 자동으로 업데이트
  - something like 수정사항이 반영된 새로운 base 이미지를 통해 애플리케이션을 빌드하는 것?
  - 도커 허브가 아니라 우리는 gcp에 private하게 올린다. 이미지를 pull하게 되는것

### GCP(Google Cloud Platform)

#### `GoogleHC (Google Health Check)`

최근 백 오피스를 운영하면서 사용자의 요청의 size 및 에러를 확인하기 위해 로그를 확인하던 중 `GoogleHC`를 알게되었다.

1. 리소스 모니터링:

- GCP의 다양한 리소스(예: 가상 머신, 로드 밸런서, 백엔드 서비스 등)의 상태를 지속적으로 확인 가능

2. 프로토콜 지원:

- HTTP, HTTPS, HTTP/2, TCP, SSL 등 다양한 프로토콜에 대한 헬스 체크를 지원 가능

3. 커스터마이즈 가능한 체크:

- 특정 URL 경로, 포트, 응답 코드 등을 지정하여 맞춤형 헬스 체크를 구성할 수 있다.

4. 자동 복구:

- 문제가 감지되면 자동으로 리소스를 재시작하거나 트래픽을 다른 인스턴스로 리디렉션할 수 있다.

5. 로드 밸런싱 통합:

- 로드 밸런서와 통합되어 비정상 인스턴스를 자동으로 트래픽에서 제외 가능

6. 알림 설정:

- 리소스 상태 변경 시 알림을 설정할 수 있다.

#### 목적:

1. 서비스의 가용성과 신뢰성 향상
2. 문제 조기 감지 및 해결
3. 자동화된 시스템 관리 지원

#### 이점:

1. 다운타임 감소: 문제를 빠르게 감지하고 해결하여 서비스 중단 시간을 최소화합니다.
2. 성능 최적화: 지속적인 모니터링을 통해 성능 문제를 조기에 식별할 수 있습니다.
3. 운영 효율성: 자동화된 모니터링과 복구 절차로 운영 부담을 줄일 수 있습니다.
4. 비용 효율성: 불필요한 리소스 사용을 줄이고 효율적인 리소스 관리가 가능합니다.

사용 사례:

- 웹 애플리케이션 서버의 상태 모니터링
- 마이크로서비스 아키텍처에서 각 서비스의 가용성 확인
- 데이터베이스 서버의 연결 상태 체크
- 로드 밸런서의 백엔드 서비스 상태 관리

GoogleHC는 GCP 환경에서 안정적이고 효율적인 시스템 운영을 위한 핵심 도구입니다. 이를 통해 개발자와 운영팀은 시스템의 건강 상태를 실시간으로 모니터링하고 관리할 수 있습니다.

#### Google Cloud Functions

1. **요청 기반 인스턴스 생성**:
   - 새로운 요청이 들어오면 서버리스 플랫폼은 자동으로 새로운 함수 인스턴스를 생성하여 요청을 처리 -> 서버리스
2. **자동 확장**:
   - 요청이 많아지면 더 많은 인스턴스를 생성하여 동시에 여러 요청을 처리할 수 있도록 한다. 이는 수평적 스케일링(Scale-out)의 한 예
3. **자동 축소**:
   - 요청이 줄어들면 불필요한 인스턴스를 자동으로 제거하여 리소스를 절약하고 비용을 절감

이러한 방식은 서버리스 아키텍처의 핵심 장점 중 하나로, 사용자는 인프라 관리에 신경 쓰지 않고 애플리케이션 로직에 집중할 수 있다. Google Cloud Functions, AWS Lambda, Azure Functions 등 주요 서버리스 플랫폼들이 이러한 자동 스케일링 기능을 제공

따라서, 서버리스 아키텍처에서의 인스턴스 생성 및 제거 과정은 스케일링의 한 형태로 볼 수 있습니다. 로드 밸런싱과는 다르게, 서버리스 스케일링은 인스턴스의 `동적 생성 및 제거를 통해 처리량을 조절`

- cloud Function마다 하나의 repo를 생성
- `pub/sub` 도 함께 사용하는 것 같다. 파일의 유무를 track하는 용도

### 가용성 향상

- 단일 서버에 문제가 발생하면 전체 서비스에 영향을 미칠 수 있다. 서버를 여러 대 운영하면 하나의 서버에 문제가 생겨도 다른 서버가 처리를 계속 수행할 수 있어 서비스의 중단 시간을 줄일 수 있다.
  이는 고가용성을 보장하는 데 중요

  - 메트릭스로 측정해서 표현해야

- 서버에서 "가용성"이란 서버 또는 네트워크 시스템이 계획된 운영 시간 동안 얼마나 안정적으로 접근 가능하고, 정상적으로 기능하는지를 나타내는 지표이다. 기본적으로, 가용성은 시스템이 사용자의 요구를 충족시키며 요청된 서비스를 제공할 수 있는 능력을 의미.

- 가용성의 중요 요소

  - 연속성과 신뢰성
  - 복구력
  - 확장성

- 가용성을 높이는 방법

  - 하드웨어 중복: e.g. 이중화 db
  - 로드 벨런싱: 여러 서버에 트래픽 분산
  - 장애 조치(failover) 시스템: e.g. 백업 시스템
  - 정기적인 백업 및 복구 테스트
  - 분산 아키텍처

- 가용성을 테스트 하는 방법
  - 모니터링 도구 사용
  - 부하 테스트: e.g. 트래픽 생성

### 부하 분산

- 로드 벨런싱
- 스케일링: 사용자의 요구에 따라 서버의 리소스를 증가/감소에 따라 스케일 아웃(수평 확장)과 스케일 업(수직 확장)을 진행
  - 현대 IT에선 스케일 아웃 전략이 더 많이 사용된다.
  - 고로 서버의 수가 늘어나고 도커 컨테이너의 수도 증가하여 컨테이너들을 효과적으로 관리하고 조정하는 것이 중요해졌으며 도커 오커스트레이션 기술이 중요해짐

### 도커 오케스트레이션의 중요성

1. 자동화된 관리: 도커 오케스트레이션 도구는 컨테이너의 배포, 관리 및 확장을 자동화하여, 수동 작업의 필요성을 크게 줄여줌. 이는 시간과 리소스를 절약할 수 있게 해줌.
2. 확장성: 오케스트레이션 도구를 사용하면 컨테이너를 쉽게 스케일 아웃할 수 있음. 예를 들어, 트래픽이 증가할 때 자동으로 컨테이너의 수를 늘릴 수 있으며, 필요하지 않을 때는 줄일 수 있음.
3. 부하 분산: 여러 컨테이너와 서버에 걸쳐 트래픽과 부하를 자동으로 분산시키는 기능을 제공함. 이는 서비스의 가용성과 성능을 향상시킴.
4. 서비스 발견과 네트워킹: 오케스트레이션 도구는 컨테이너 간의 네트워킹과 서비스 발견을 관리함. 각 컨테이너가 필요한 리소스와 서비스를 찾아서 소통할 수 있도록 지원함.
5. 상태 관리와 자가 치유: 시스템이 정의한 상태를 유지하도록 설정할 수 있으며, 문제가 발생했을 때 오케스트레이션 도구가 자동으로 문제를 해결하려고 시도함. 예를 들어, 실패한 컨테이너를 자동으로 재시작할 수 있음.
